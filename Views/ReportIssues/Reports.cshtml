@model PROG_3B_ST10255309.Models.Report
@{
    ViewData["Title"] = "Report an Issue";
}
<div class="p-4 container">
    <h1 class="display-4 text-center">Report an Issue</h1>
    <p class="lead text-center">Please fill out the following form to complete your report.</p>
</div>
<style>
    body {
        background-image: url('https://e1.pxfuel.com/desktop-wallpaper/8/898/desktop-wallpaper-light-colour-plain-backgrounds-light-grey-plain.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        height: 100vh;
        margin: 0;
        font-family: Arial, sans-serif;
    }

    .report-location{
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .report-category{
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .report-description{
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .report-attatch{
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .custom-button {
        width: 200px;
        height: 50px;
        font-size: 18px;
        margin-top: 10px;
    }
</style>

<div class="container">
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg" alt="SA Flag" class="flag" />
    <style>
        .flag {
            position: absolute;
            top: 40px;
            right: 10px;
            width: 100px;
            height: auto;
        }
    </style>

    <img src="~/uploads/LOGO.png" alt="Muni Logo" class="logo" />
    <style>
        .logo {
            position: absolute;
            top: 30px;
            right: 130px;
            width: 100px;
            height: auto;
        }
    </style>
</div>


@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger" role="alert">
        @TempData["ErrorMessage"]
    </div>
}

<form asp-action="SubmitReport" method="post" enctype="multipart/form-data" class="container mt-4">
    @Html.AntiForgeryToken()

    <div class="report-location">
        <label for="Location">Location <span class="text-danger">*</span></label>
        <input asp-for="Location" class="form-control" placeholder="Please enter the location of the issue" />
        <span asp-validation-for="Location" class="text-danger"></span>
    </div>

    <div class="report-category">
        <label for="Category">Category <span class="text-danger">*</span></label>
        <select asp-for="Category" class="form-control">
            <option value="">Select a category</option>
            <option value="Roads">Roads</option>
            <option value="Water">Water</option>
            <option value="Electricity">Electricity</option>
            <option value="Waste">Waste</option>
            <option value="Safety">Safety</option>
            <option value="Other">Other</option>
        </select>
        <span asp-validation-for="Category" class="text-danger"></span>
    </div>

    <div class="report-description">
        <label for="Description">Description <span class="text-danger">*</span></label>
        <textarea asp-for="Description" class="form-control" rows="4" placeholder="Please tell us about the issue"></textarea>
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>

    <div class="report-attatch">
        <label for="MediaAttachment">Media Attachment</label>
        <input name="MediaAttachment" type="file" class="d-none" accept="image/*,video/*" />
        <button type="button" class="btn btn-secondary btn-sm mt-2" onclick="document.querySelector('input[name=MediaAttachment]').click();">Choose File</button>
    </div>

    <button type="submit" class="btn btn-primary custom-button">Submit Report</button>
</form>

<div class="modal fade" id="SuccessModel" tabindex="-1" role="dialog" aria-labelledby="sucess" aria-hidden="true">
    <div class="modal-dialog model-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="sucess">Report Submitted Successfully</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Would you like to leave a review?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
                <a href="@Url.Action("Questions", "Feedback")" class="btn btn-primary">Yes</a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        $(document).ready(function () {
            var isSuccess = '@TempData["SuccessModel"]' === 'True';
            if (isSuccess) {
                $('#SuccessModel').modal('show');
            }
        });
    </script>
}

<!--Huiculescu, A. (2017). ASP.NET MVC background image. [online] Stack Overflow. Available at: https://stackoverflow.com/questions/44438698/asp-net-mvc-background-image. [Accessed 7 September 2025]-->
<!--W3Schools (2019). HTML CSS. [online] W3schools.com. Available at: https://www.w3schools.com/html/html_css.asp. [Accessed 9 September 2025]-->
<!--Canva (2019). How to Create a Logo with Canva - Canva. [online] About Canva. Available at: https://www.canva.com/create/logos/ [Accessed 15 Oct. 2025].-->
<!--contributors, M.O., Jacob Thornton, and Bootstrap (2025). Modal. [online] getbootstrap.com. Available at: https://getbootstrap.com/docs/4.0/components/modal/. [Accessed 10 September]-->